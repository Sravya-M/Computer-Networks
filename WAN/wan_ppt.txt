Basics:


What is Full Duplex Communication?
Half-Duplex vs Full-Duplex
Why Full Duplex?
Self Interference?
How can we achieve Full-Duplex and avoid Self Interference?

What is Full Duplex Communication?
	Simulataneous transmission and recieval of packets at a node in a channel at the same time and same frequency.

Half-Duplex vs Full-Duplex
	Diagram
	In legacy half-duplex transmissions, to accomodate uplink and downlink or transmission and recieval, either separate time slots have been allocated or frequency division duplexing is used with guard bands.
	In full duplex, transmission and reception can be done at the same time and frequency in a channel.

Why Full Duplex?
	As Full Duplex communications conceptually doubles the spectral efficiency of the channel.

Self Interference?
	In half duplex communications, this was not possible because of the overwhelming nature of the self interference, which is generated by the transmitter to its own collocated receiver.

How can we achieve Full-Duplex and avoid Self Interference?
	Full duplex communications can be realised with the support of strong physical layer protocols to suppress the self interference.
	Physical Layer Protocols we have found in some papers are:
		Passive Suppression
		Analog Cancellation
		Digital Cancellation
We are not going in depth of physical layer protocols as we have focused mainly on MAC layer protocols of Infrastructure mode Wireless LANs.

Literature Survey:
	We have read few papers on Full Duplex Communications and we will discuss two of them here inolving MAC protocols.

Paper1:
Simultaneous Transmit and Receive Operation in Next Generation IEEE 802.11 WLANs: A MAC Protocol Design Approach, IEEE Wireless Communications, December 2017

We will discuss 2 concepts from this paper which will be useful in further dicussions.
Modes of Full Duplex Communication between nodes.
How Full Duplex solves Hidden Terminal Problem

Modes of Operation of FD nodes:
	There can be 4 modes in which the nodes can communicate in FD transmissions.
	Existing papers makes use of 2 bit mode field in packet header.

	Figure a shows that 2 nodes are in HD communication, with mode 00
	Figure b shows 2 nodes in bidirectional FD communication, which is mode 01
	Figure c shows unidirectional Full duplex transmission, which is also called as DBTM Destination Based Transmission Mode (with mode 10)
		Primary transmi
	Figure d shows unidirectional Full duplex transmission, which is also called as SBTM Destination Based Transmission Mode (with mode 11)
		
Hidden Terminal Problem:
	In legacy HD communications, we have RTS/CTS mechanism for collision detection in to solve Hidden terminal problem.
	FD communication avoids RTS/CTS to reduce signalling overhead.
		Consider a scenario of multiple nodes having data in their buffers for direct transmission to and recieve from a common AP. If node starts transmitting to AP and the AP simultaneously starts transmitting data back to this node, the other nodes will hear the transmission from AP and delay their transmissions to avoid collisions.
	Even if the AP has no data to send back to the 1st node, it still repeats an ACK for that node so as to prevent the other nodes from transmitting.

	Diagrams.

Paper2:

Medium Access Control Design for Full Duplex Wireless Systems: Challenges and Approaches, IEEE Communications Magazine, May 2015

Here, we will discuss 2 MAC protocols that have been discussed in papers.
Virtual Contention
Header Snooping

Virtual Contention Resolution:
	
	Whenever a node M1 initiates transmission to AP with mode as 01 (Full Duplex), if AP doesn't have its HOL packet for M1, AP checks its buffer if it has a packet for M1. 
	If yes, it will make that as HOL packet and transmits to exploit FD communication in channel.

	In the diagram, we can see that AP can rearrange its buffer to send packets to M1.

Header Snooping:
	In header snooping based MAC protocols, the nodes in the network decodes the headers of packets going in the channel.
	This is suitable in Source Based Transmission mode we discussed, 
	where AP starts transmitting to node A requesting Full duplex communication with mode=01, HOL=1
	But node A is not having any packet to AP, so it responds with an ACK and mode=00.
	AP now changes the mode to 11, and transmits the next packet to A.

	Another node in B which snoops the packet header with mode = 11 understands that AP is free for recieval starts transmitting to AP.

Challenges:
Virtual Contention: Delaying HOL is not always feasible, starvation
	VC sometimes delay the HOL packets to send the packets in buffer to the current node requesting for FD transmission.
	This may lead to starvation for HOL packets.
Header Snooping: Collision may take place
	We are taking up this problem and providing a solution.
High processing capability and sufficiently large buffers are required for simultaneous transmission and reception.
Selection of 3rd node in uni-directional transmission has to be taken care by AP.
	Diagram, Selecting the node B which is hidden to node A requires network topology information and protocols at AP.

Header Snooping: Collision Scenario in FD
	Diagram

Novel Idea:
	How will the nodes know if they can contend before snooping the header? (having mode of AP as 01, they cannot transmit)
	We are introducing a bit in MAC packet header to know if AP initiated the communication.
	API (Access Point Initiated Communication) = 1 if AP initiates the communication.
	Also introduced an algorithm for the new back off counter for contending nodes in this scenario.

Adding a bit to Packet Header (API)
	AP will be in Mode = 01 in 2 cases.
	A has initiated the transmission and A, AP are in FD communication.
	AP has initiated the transmission to A. AP may be free for receiving if A is not having data for AP.

	But other nodes think AP is not free for receiving.
	To distinguish the above 2 cases, we introduced API bit.

AP will wait for 5(avg) time slots
	Diagram

New Back Off Counter for contending nodes
	Back off counter usually lies between 0-1024 slots for the nodes who are waiting for channel access.
	We can not make AP to wait for a lot of time.
	So, for nodes who have packets to AP,

	New_backoff = old_backoff * 0.01
	Ex: 
	Let B has old_backoff = 120, 
	new_backoff = 1.2 slots, 
	C has old_backoff = 535,
	new_backoff = 5.35 slots

	B won, So C changes the counter to old, freezes.

Conclusion:
	FD can improve throughput gain.
	FD reduces congestion, end to end delay as nodes can simultaneously transmit and receive.
	Avoid signalling overhead.


Full Duplex communications:

Can potentially increase the spectral efficiency by 2, considering a good physical layer SI cancellation policies.
Can reduce the congestion as AP can transmit and receive at the same time.
Can be efficient in collision detection.

There can be 2 modes of transmission in FD networks:

1. Bidirectional FD
	A to AP, AP to A
	AP to A, A to AP
2. Unidirectional FD
	A to AP, AP to B
	AP to B, A to AP

But, in reality, all the nodes in a WiFi network are not Full Duplex in nature. (Physical Devices)

The existing papers dicussed the FD MAC protocols in 2 ways.

1. Considering only FD devices
	with CSMA/CA without virtual contention.
	We have 3 different MAC protocols for facilitating ease of FD transmission in FD networks.
		1. Shared Random Backoff (Problem: doesn't seem to be feasible in infrastructure mode, how many backoffs will the AP be able to remember)
		2. Header Snooping
		3. Virtual Contention

	One paper contradicted the existence of an AP initiated transmission.
	Disadvantage: Header Snooping
			(AP to B) started.
			We will have a problem of collision here in case 2 or more hidden nodes snoop the packets at the same time and try transmit to AP.

2. Coexistence of FD and HD
	With virtual Contention (RTS/CTS)
	Disadvantage: High signal overhead.


IDEA:
	In this scenario, we thought of proposing an algorithm which does not use RTS/CTS and tried exploiting the advantage of AP being an FD node.
	FD vs RTS/CTS
		When HD nodes which are hidden to each other starts transmitting at the same time, there will be a collision.
		But if one starts early, once the AP listens to a signal in the channel, immediately it can intimate the other nodes in the channel saying the channel is busy.
		So, there won't be any problem if the 2 hidden nodes have a time gap of sending header, there won't be any collision.
		The vulnerable period of collision will be of transmission of the header.

	Assumptions:
		Any node can transmit at anytime.
		Every data packet header needs to maintain an extra field indicating the mode of transmission.
		
		Particularly discussing about hidden terminal problem in case of Header snooping:
			AP initiates transmission to node A with mode as 01(bidirectional FD) and HOL=1(next packet is also to A).
				If node A is FD node and has data to AP, it starts transmitting after receiving AP's header.
					AP will send a busy tone if it finishes faster than node A, to avoid hidden node interference.
					Both the nodes will wait until the max(AP data, A data) and send ACK to each other.
				If node A is FD and doesn't have data to AP or if node A is HD, it will send an ACK to AP after the data transmission.
				
				Other nodes which cannot hear A, will wait for AP's data packet time+ 2 SIFS+1 ACK, sense the channel. (these will be at freeze point of backoff counter)
					if free and send an RTS.
					if not free, be quite.

		Other cases: 1. A node wins the contention and starts transmitting.
				i. node is HD, AP has to find a node which is not in the interference range and send data which takes less time than the duration of this packet.
				ii. node is FD, AP has data back
				iii. Node is FD, AP has to find another node like in point i but this time the duration can be anything.

https://ieeexplore.ieee.org/document/9045357/






